{% extends "inventory/base.html" %}
{% block content %}

<h1 class="text-2xl font-bold mb-4 text-green-600">Batch {{ inventory.batch_number }}</h1>

<div class="space-y-2 mb-6">
  <p><span class="font-semibold">Medicine:</span> {{ inventory.medicine.generic_name }} ({{ inventory.medicine.brand_name }})</p>
  <p><span class="font-semibold">Quantity:</span> {{ inventory.quantity }}</p>
  <p><span class="font-semibold">Expiration Date:</span> {{ inventory.expiration_date }}</p>
  <p><span class="font-semibold">Added On:</span> {{ inventory.date_added }}</p>
  <p><span class="font-semibold">Last Updated:</span> {{ inventory.last_updated }}</p>
</div>

<hr class="my-6 border-gray-300">

<h2 class="text-xl font-semibold mb-3 text-blue-600">Transactions involving this batch</h2>
<div class="overflow-x-auto bg-white rounded-b-lg shadow mb-6">
  <table class="w-full text-sm text-left text-gray-600 border border-gray-200">
    <thead class="bg-gray-100 text-gray-800 uppercase text-xs font-semibold">
      <tr>
        <th class="px-4 py-2 border">Date</th>
        <th class="px-4 py-2 border">User</th>
        <th class="px-4 py-2 border">Status</th>
        <th class="px-4 py-2 border">Quantity Dispensed</th>
      </tr>
    </thead>
    <tbody>
      {% for tx in transactions %}
      <tr class="border-t hover:bg-gray-50">
        <td class="px-4 py-2">{{ tx.transaction_date }}</td>
        <td class="px-4 py-2">{{ tx.user.username }}</td>
        <td class="px-4 py-2">{{ tx.get_status_display }}</td>
        <td class="px-4 py-2">{{ tx.quantity_dispensed }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" class="px-4 py-3 text-center text-gray-500">No transactions for this batch.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<p>
  <a href="{% url 'inventory-list' %}" 
     class="inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition">
    â¬… Back to Inventory
  </a>
</p>

{% endblock %}
